<!DOCTYPE HTML>
<html lang="en">
  <head>
    <title>Wikidata globe</title>
    <meta charset="utf-8">
    <style type="text/css">
      html {
        height: 100%;
      }
      body {
        margin: 0;
        padding: 0;
        background: #000000 url(img/loading.gif) center center no-repeat;
        color: #ffffff;
        font-family: sans-serif;
        font-size: 13px;
        line-height: 20px;
        height: 100%;
      }

    </style>
  </head>
  <body>

  <div id="container"></div>
  
  <script type="text/javascript" src="js/ThreeWebGL.js"></script>
  <script type="text/javascript" src="js/ThreeExtras.js"></script>
  <script type="text/javascript" src="js/RequestAnimationFrame.js"></script>
  <script type="text/javascript" src="js/Detector.js"></script>
  <script type="text/javascript" src="js/globe.js"></script>
  <script type="text/javascript">

if(!Detector.webgl){
	Detector.addGetWebGLMessage();
} else {
	var container = document.getElementById('container');
	var globe = new DAT.Globe(container);
	var currentLang = 'en';
	var currentRes = 1;

	var loadData = function(lang, res) {
		currentLang = lang;
		currentRes = res;
//		document.getElementById(currentLang + currentRes).style.color = '#fff';
//		document.getElementById('load').innerHTML = 'Loading...';
		var xhr;

		xhr = new XMLHttpRequest();
		xhr.open('GET', 'data/data-' +lang + res + '.json', true);
		
		xhr.onreadystatechange = function(e) {
			if (xhr.readyState === 4) {
				if (xhr.status === 200) {
					var data = [];
					data = JSON.parse(xhr.responseText);
					window.data = data;
					globe.clearData();
					globe.addData(data);
					globe.createPoints();
					globe.animate();
					document.getElementById('load').innerHTML = ' ';
				}
			}
		};
		xhr.send(null);
	};
	
	loadData('en', 1);
}

  </script>

  </body>

</html>
